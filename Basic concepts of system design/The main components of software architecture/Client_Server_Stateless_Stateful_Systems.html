<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بدون عنوان</title>
    <link rel="stylesheet" href="../../css/style.css">
    <meta name="description" content="بدون عنوان">
    <meta name="keywords" content="طراحی سیستم, مهندسی نرم‌افزار, معماری سیستم">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../../index.html" class="logo">طراحی سیستم</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="../../index.html">خانه</a></li>
                    <li><a href="../../index.html#basic-concepts">مفاهیم پایه</a></li>
                    <li><a href="../../index.html#main-components">اجزای اصلی</a></li>
                    <li><a href="../../index.html#scalable-systems">سیستم‌های مقیاس‌پذیر</a></li>
                    <li><a href="../../index.html#advanced-topics">موضوعات پیشرفته</a></li>
                    <li><a href="../../index.html#interviews">مصاحبه</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-toggle">☰</button>
        </div>
    </header>

    <div class="container">
        <main class="main-content">
            <aside class="sidebar">
                
    <h3>بدون عنوان</h3>
    <ul>
        <li><a href="../../../index.html">بازگشت به خانه</a></li>
        <li><a href="../../../index.html#basic-concepts">مفاهیم پایه</a></li>
        <li><a href="../../../index.html#main-components">اجزای اصلی</a></li>
        <li><a href="../../../index.html#scalable-systems">سیستم‌های مقیاس‌پذیر</a></li>
        <li><a href="../../../index.html#advanced-topics">موضوعات پیشرفته</a></li>
        <li><a href="../../../index.html#interviews">آمادگی مصاحبه</a></li>
    </ul>
    
            </aside>

            <article class="content">
                <div class="breadcrumb">
                    <a href="index.html">خانه</a>
<span>/</span>
<span>Basic concepts of system design</span>
<span>/</span>
<span>The main components of software architecture</span>
<span>/</span>
<span>Client_Server_Stateless_Stateful_Systems.html</span>
                </div>

                <p>,# معماری کلاینت-سرور، سیستم‌های بدون حالت و حالت‌دار</p>

<p>این سند به بررسی معماری کلاینت-سرور و مفاهیم سیستم‌های بدون حالت (Stateless) و حالت‌دار (Stateful) می‌پردازد. این محتوا شامل تعریف، ویژگی‌ها، مزایا و معایب، تفاوت‌ها، کاربردهای واقعی، موارد استفاده، دیاگرام‌ها، چالش‌ها و منابع پیشنهادی برای مطالعه بیشتر است. این سند به زبان فارسی و با فرمت مارک‌داون ارائه شده است تا برای مستندسازی آموزشی و یادگیری عمیق در زمینه معماری نرم‌افزار و طراحی سیستم مناسب باشد.</p>

<p>---</p>

<h2>تعریف معماری کلاینت-سرور و نحوه عملکرد آن</h2>

<strong>معماری کلاینت-سرور</strong> یک مدل طراحی نرم‌افزاری است که در آن سیستم به دو بخش اصلی تقسیم می‌شود: <strong>کلاینت</strong> (Client) و <strong>سرور</strong> (Server). این معماری برای مدیریت تعاملات بین کاربران (کلاینت‌ها) و منابع مرکزی (سرورها) طراحی شده است.

<ul><li><strong>کلاینت:</strong> بخشی از سیستم که درخواست‌ها را ارسال می‌کند و پاسخ‌ها را از سرور دریافت می‌کند. کلاینت معمولاً شامل رابط کاربری (مانند مرورگر وب یا اپلیکیشن موبایل) است.</li></ul>
<ul><li><strong>سرور:</strong> بخشی که درخواست‌های کلاینت را پردازش کرده و پاسخ مناسب (مانند داده یا خدمات) را ارائه می‌دهد. سرورها معمولاً منابع محاسباتی، ذخیره‌سازی یا خدمات را مدیریت می‌کنند.</li></ul>

<strong>نحوه عملکرد:</strong>
<ul><li>کلاینت درخواستی (مانند درخواست یک صفحه وب) را از طریق شبکه (مانند اینترنت) به سرور ارسال می‌کند.</li></ul>
<ul><li>سرور درخواست را پردازش می‌کند، که ممکن است شامل دسترسی به پایگاه داده، انجام محاسبات یا اجرای منطق تجاری باشد.</li></ul>
<ul><li>سرور پاسخ (مانند HTML، JSON یا فایل) را به کلاینت بازمی‌گرداند.</li></ul>
<ul><li>کلاینت پاسخ را نمایش داده یا پردازش می‌کند.</li></ul>

<strong>مثال:</strong> در یک وب‌سایت، مرورگر (کلاینت) درخواستی برای بارگذاری صفحه به سرور وب (مانند Apache یا NGINX) ارسال می‌کند، و سرور داده‌های صفحه را از پایگاه داده بازیابی کرده و به مرورگر بازمی‌گرداند.

<p>---</p>

<h2>سیستم بدون حالت (Stateless) چیست؟</h2>

<strong>تعریف:</strong> یک سیستم بدون حالت سیستمی است که در آن سرور هیچ اطلاعاتی از وضعیت (state) کلاینت بین درخواست‌های متوالی ذخیره نمی‌کند. هر درخواست از کلاینت به‌صورت مستقل پردازش می‌شود و تمام اطلاعات مورد نیاز برای پردازش در خود درخواست گنجانده شده است.

<strong>ویژگی‌ها:</strong>
<ul><li>هر درخواست کاملاً مستقل است.</li></ul>
<ul><li>سرور وضعیت کلاینت (مانند اطلاعات جلسه کاربر) را در حافظه خود نگه نمی‌دارد.</li></ul>
<ul><li>اطلاعات وضعیت معمولاً در کلاینت (مانند کوکی‌ها یا توکن‌های JWT) یا در پایگاه داده ذخیره می‌شود.</li></ul>

<strong>مثال‌ها:</strong>
<ul><li>APIهای RESTful (مانند APIهای وب‌سایت‌های تجارت الکترونیک).</li></ul>
<ul><li>درخواست‌های HTTP که از کوکی‌ها یا توکن‌ها برای احراز هویت استفاده می‌کنند.</li></ul>

<strong>مزایا:</strong>
<ul><li><strong>مقیاس‌پذیری آسان:</strong> چون سرور نیازی به ذخیره وضعیت ندارد، می‌توان به‌راحتی سرورهای بیشتری اضافه کرد (مقیاس‌پذیری افقی).</li></ul>
<ul><li><strong>سادگی طراحی:</strong> هر درخواست مستقل است، بنابراین نیازی به مدیریت پیچیده وضعیت نیست.</li></ul>
<ul><li><strong>تحمل خطا:</strong> خرابی یک سرور تأثیری بر درخواست‌های بعدی ندارد، زیرا وضعیت در سرور ذخیره نشده است.</li></ul>

<strong>معایب:</strong>
<ul><li><strong>نیاز به ارسال داده‌های بیشتر:</strong> کلاینت باید تمام اطلاعات مورد نیاز را در هر درخواست ارسال کند، که ممکن است حجم داده‌ها را افزایش دهد.</li></ul>
<ul><li><strong>پیچیدگی در مدیریت وضعیت کلاینت:</strong> ذخیره وضعیت در کلاینت یا پایگاه داده ممکن است پیچیدگی را به سمت کلاینت منتقل کند.</li></ul>
<ul><li><strong>عملکرد در سناریوهای پیچیده:</strong> برای برنامه‌هایی که نیاز به تعاملات مداوم دارند، ممکن است ناکارآمد باشد.</li></ul>

<p>---</p>

<h2>سیستم حالت‌دار (Stateful) چیست؟</h2>

<strong>تعریف:</strong> یک سیستم حالت‌دار سیستمی است که سرور اطلاعات وضعیت (state) کلاینت را بین درخواست‌های متوالی در حافظه خود نگه می‌دارد. این وضعیت می‌تواند شامل اطلاعات جلسه، داده‌های موقت یا上下文 کاربر باشد.

<strong>ویژگی‌ها:</strong>
<ul><li>سرور اطلاعات وضعیت را (مانند اطلاعات ورود کاربر یا وضعیت یک بازی) در حافظه یا پایگاه داده ذخیره می‌کند.</li></ul>
<ul><li>درخواست‌های بعدی به وضعیت ذخیره‌شده وابسته هستند.</li></ul>
<ul><li>معمولاً برای برنامه‌هایی که نیاز به تعامل مداوم دارند استفاده می‌شود.</li></ul>

<strong>مثال‌ها:</strong>
<ul><li>برنامه‌های چت بلادرنگ با استفاده از WebSocket (مانند واتس‌اپ).</li></ul>
<ul><li>بازی‌های آنلاین که وضعیت بازیکن را در سرور ذخیره می‌کنند.</li></ul>

<strong>مزایا:</strong>
<ul><li><strong>کارایی در تعاملات مداوم:</strong> چون وضعیت در سرور ذخیره شده، نیازی به ارسال مکرر داده‌های وضعیت نیست.</li></ul>
<ul><li><strong>مناسب برای برنامه‌های پیچیده:</strong> برای سناریوهایی مانند چت یا بازی‌های چندنفره که نیاز به حفظ حالت دارند، ایده‌آل است.</li></ul>
<ul><li><strong>تجربه کاربری بهتر:</strong> تعاملات سریع‌تر و روان‌تر به دلیل کاهش نیاز به انتقال داده‌های اضافی.</li></ul>

<strong>معایب:</strong>
<ul><li><strong>پیچیدگی مقیاس‌پذیری:</strong> ذخیره وضعیت در سرور باعث می‌شود مقیاس‌پذیری افقی دشوار شود، زیرا درخواست‌های یک کاربر باید به همان سرور هدایت شوند (Session Stickiness).</li></ul>
<ul><li><strong>ریسک خرابی:</strong> اگر سرور خراب شود، وضعیت ذخیره‌شده ممکن است از بین برود.</li></ul>
<ul><li><strong>مدیریت حافظه:</strong> ذخیره وضعیت برای تعداد زیادی کاربر می‌تواند منابع سرور را تحت فشار قرار دهد.</li></ul>

<p>---</p>

<h2>تفاوت‌های کلیدی بین سیستم‌های بدون حالت و حالت‌دار</h2>

<p><td> <strong>معیار</strong>                  </td> <strong>بدون حالت (Stateless)</strong>                                              <td> <strong>حالت‌دار (Stateful)</strong>                                               </td>
<td>----------------------------</td>-----------------------------------------------------------------------<td>-----------------------------------------------------------------------</td>
<td> <strong>ذخیره‌سازی وضعیت</strong>      </td> وضعیت در سرور ذخیره نمی‌شود؛ در کلاینت یا پایگاه داده ذخیره می‌شود.   <td> وضعیت در سرور (حافظه یا پایگاه داده) ذخیره می‌شود.                   </td>
<td> <strong>مقیاس‌پذیری</strong>           </td> مقیاس‌پذیری آسان‌تر به دلیل استقلال درخواست‌ها.                       <td> مقیاس‌پذیری دشوارتر به دلیل نیاز به Session Stickiness یا هماهنگی.   </td>
<td> <strong>تحمل خطا</strong>              </td> خرابی سرور تأثیری بر درخواست‌های بعدی ندارد.                         <td> خرابی سرور ممکن است باعث از دست رفتن وضعیت شود.                    </td>
<td> <strong>پیچیدگی</strong>               </td> ساده‌تر، اما ممکن است نیاز به داده‌های اضافی در درخواست‌ها باشد.      <td> پیچیده‌تر به دلیل نیاز به مدیریت وضعیت در سرور.                      </td>
<td> <strong>مثال‌ها</strong>                </td> APIهای RESTful، وب‌سایت‌های ساده.                                    <td> WebSocket، برنامه‌های چت، بازی‌های آنلاین.                            </td>
<td> <strong>کارایی</strong>                </td> مناسب برای درخواست‌های مستقل، اما ممکن است در سناریوهای مداوم کندتر باشد. <td> مناسب برای تعاملات مداوم، اما منابع بیشتری مصرف می‌کند.              </td></p>

<p>---</p>

<h2>کاربرد این مدل‌ها در دنیای واقعی</h2>

<ul><li><strong>REST APIها (سیستم بدون حالت):</strong></li></ul>
   - <strong>کاربرد:</strong> APIهای RESTful برای وب‌سایت‌ها یا اپلیکیشن‌های تجارت الکترونیک (مانند APIهای آمازون).
   - <strong>چگونه کار می‌کند؟</strong> هر درخواست شامل تمام اطلاعات مورد نیاز (مانند توکن‌های احراز هویت) است. سرور هیچ اطلاعاتی از درخواست‌های قبلی ذخیره نمی‌کند.
   - <strong>مثال:</strong> در یک اپلیکیشن تجارت الکترونیک، درخواست دریافت لیست محصولات از طریق REST API انجام می‌شود، و سرور اطلاعات را از پایگاه داده بازیابی می‌کند.

<ul><li><strong>WebSocket (سیستم حالت‌دار):</strong></li></ul>
   - <strong>کاربرد:</strong> برنامه‌های چت بلادرنگ (مانند واتس‌اپ) یا بازی‌های آنلاین.
   - <strong>چگونه کار می‌کند؟</strong> سرور ارتباط مداومی با کلاینت برقرار می‌کند و وضعیت (مانند پیام‌های چت یا موقعیت بازیکن) را در حافظه نگه می‌دارد.
   - <strong>مثال:</strong> در واتس‌اپ، سرور وضعیت اتصال کاربر و پیام‌های اخیر را ذخیره می‌کند تا پیام‌ها به‌صورت بلادرنگ ارسال شوند.

<p>---</p>

<h2>موارد استفاده و انتخاب بین بدون حالت و حالت‌دار</h2>

<h3>موارد استفاده سیستم بدون حالت:</h3>
<ul><li><strong>وب‌سایت‌های عمومی:</strong> مانند وب‌سایت‌های خبری یا فروشگاه‌های آنلاین که درخواست‌ها مستقل هستند.</li></ul>
<ul><li><strong>APIهای مقیاس‌پذیر:</strong> مانند APIهای RESTful برای اپلیکیشن‌های موبایل.</li></ul>
<ul><li><strong>سیستم‌های با ترافیک بالا:</strong> زمانی که نیاز به مقیاس‌پذیری افقی بدون پیچیدگی مدیریت وضعیت است.</li></ul>

<strong>چرا انتخاب کنیم؟</strong>
<ul><li>برای سیستم‌هایی که نیاز به مقیاس‌پذیری آسان و تحمل خطای بالا دارند.</li></ul>
<ul><li>زمانی که درخواست‌ها مستقل هستند و نیازی به حفظ حالت بین درخواست‌ها نیست.</li></ul>

<h3>موارد استفاده سیستم حالت‌دار:</h3>
<ul><li><strong>برنامه‌های بلادرنگ:</strong> مانند چت، ویدئو کنفرانس یا بازی‌های آنلاین.</li></ul>
<ul><li><strong>سیستم‌های با تعاملات مداوم:</strong> مانند ویرایشگرهای مشترک (Google Docs) یا سیستم‌های پخش ویدئو.</li></ul>
<ul><li><strong>برنامه‌هایی با وضعیت پیچیده:</strong> مانند سیستم‌های رزرو که نیاز به حفظ وضعیت رزرو دارند.</li></ul>

<strong>چرا انتخاب کنیم؟</strong>
<ul><li>برای سناریوهایی که نیاز به تعاملات مداوم و سریع دارند.</li></ul>
<ul><li>زمانی که حفظ وضعیت در سرور کارایی را بهبود می‌بخشد.</li></ul>

<p>---</p>

<h2>دیاگرام‌ها و تصاویر</h2>

<h3>دیاگرام جریان داده در سیستم بدون حالت (REST API):</h3>

<pre><code>
[کلاینت] --> [درخواست HTTP + توکن] --> [تعادل‌کننده بار] --> [سرور وب]
                                                  |
                                                  v
                                           [پایگاه داده]
                                                  |
                                                  v
                                        [پاسخ HTTP (JSON)]
</code></pre>

<strong>توضیح:</strong> کلاینت تمام اطلاعات (مانند توکن احراز هویت) را در درخواست ارسال می‌کند. سرور درخواست را پردازش کرده و پاسخ را بدون ذخیره وضعیت بازمی‌گرداند.

<h3>دیاگرام جریان داده در سیستم حالت‌دار (WebSocket):</h3>

<pre><code>
[کلاینت] --> [اتصال WebSocket] --> [سرور وب]
                            |
                            v
                       [حافظه سرور (وضعیت)]
                            |
                            v
                       [پایگاه داده]
                            |
                            v
                   [پیام‌های بلادرنگ]
</code></pre>

<strong>توضیح:</strong> کلاینت از طریق WebSocket به سرور متصل می‌شود. سرور وضعیت را (مانند اطلاعات جلسه) در حافظه نگه می‌دارد و پیام‌ها را به‌صورت بلادرنگ ارسال می‌کند.

<p>---</p>

<h2>چالش‌های رایج در مدیریت وضعیت</h2>

<ul><li><strong>مدیریت Session Stickiness در سیستم‌های حالت‌دار:</strong></li></ul>
   - <strong>چالش:</strong> در سیستم‌های حالت‌دار، درخواست‌های یک کاربر باید به همان سرور هدایت شوند، که مقیاس‌پذیری را دشوار می‌کند.
   - <strong>راه‌حل:</strong> استفاده از ابزارهایی مانند Redis برای ذخیره‌سازی توزیع‌شده وضعیت یا تعادل‌کننده‌های بار با پشتیبانی از Session Stickiness.

<ul><li><strong>از دست رفتن وضعیت در صورت خرابی:</strong></li></ul>
   - <strong>چالش:</strong> در سیستم‌های حالت‌دار، خرابی سرور ممکن است باعث از دست رفتن وضعیت شود.
   - <strong>راه‌حل:</strong> ذخیره‌سازی وضعیت در پایگاه داده‌های پایدار یا استفاده از تکرار داده‌ها.

<ul><li><strong>پیچیدگی در سیستم‌های بدون حالت:</strong></li></ul>
   - <strong>چالش:</strong> ارسال مکرر داده‌های وضعیت در هر درخواست می‌تواند حجم داده‌ها را افزایش دهد.
   - <strong>راه‌حل:</strong> استفاده از توکن‌های سبک (مانند JWT) و بهینه‌سازی درخواست‌ها.

<ul><li><strong>هماهنگی در سیستم‌های توزیع‌شده:</strong></li></ul>
   - <strong>چالش:</strong> در سیستم‌های حالت‌دار توزیع‌شده، هماهنگی بین سرورها برای حفظ وضعیت دشوار است.
   - <strong>راه‌حل:</strong> استفاده از سیستم‌های مدیریت حالت مانند ZooKeeper یا Redis.

<p>---</p>

<h2>منابع پیشنهادی برای مطالعه بیشتر</h2>

<ul><li><em>Designing Data-Intensive Applications</em> نوشته مارتین کلپمن: کتابی جامع برای درک معماری‌های کلاینت-سرور و مدیریت حالت.</li></ul>
<ul><li><em>The System Design Primer</em> (منبع متن‌باز در GitHub): راهنمایی برای یادگیری سیستم‌های بدون حالت و حالت‌دار.</li></ul>
<ul><li>وبلاگ‌های مهندسی:</li></ul>
   - <em>AWS Architecture Blog</em>: مقالات در مورد معماری‌های کلاینت-سرور و REST API.
   - <em>Microsoft Azure Blog</em>: توضیحات در مورد WebSocket و برنامه‌های بلادرنگ.
<ul><li>دوره‌های آنلاین:</li></ul>
   - <em>Grokking the System Design Interview</em> در DesignGuru.io
   - <em>System Design Course</em> در Educative.io

<p>---</p>

<p>این سند مفهوم معماری کلاینت-سرور و تفاوت‌های سیستم‌های بدون حالت و حالت‌دار را به‌صورت جامع توضیح می‌دهد. در صورت نیاز به توضیحات عمیق‌تر یا مثال‌های بیشتر، لطفاً اطلاع دهید!</p>

                <div class="alert alert-info" style="margin-top: 2rem;">
                    <strong>نکته:</strong> این مطلب بخشی از مجموعه آموزش طراحی سیستم است. برای مطالعه سایر مطالب، از منوی کناری استفاده کنید.
                </div>
            </article>
        </main>
    </div>

    <footer>
        <div class="footer-content">
            <p>&copy; 2024 آموزش طراحی سیستم - تمام حقوق محفوظ است</p>
            <p>آخرین به‌روزرسانی: 2025-07-12</p>
        </div>
    </footer>

    <script src="../../js/script.js"></script>
</body>
</html>